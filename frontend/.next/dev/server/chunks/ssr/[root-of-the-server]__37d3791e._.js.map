{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/pages/vendor/products.tsx"],"sourcesContent":["import { useState, useEffect, useMemo } from 'react';\r\nimport { api } from '../../services/api';\r\nimport { useToast } from '../../components/ui/ToastProvider';\r\n\r\ninterface Product {\r\n  _id: string;\r\n  vendor: string | { _id: string };\r\n  name: string;\r\n  description?: string;\r\n  price: number;\r\n  mrp?: number;\r\n  category?: string;\r\n  threshold?: number;\r\n  image?: string;\r\n  isAvailable: boolean;\r\n  stock: number;\r\n  createdAt?: string;\r\n}\r\n\r\nconst emptyProduct: Partial<Product> = {\r\n  name: '',\r\n  description: '',\r\n  price: 0,\r\n  mrp: 0,\r\n  category: '',\r\n  threshold: 0,\r\n  image: '',\r\n  isAvailable: true,\r\n  stock: 0,\r\n};\r\n\r\ntype StockStatus = 'all' | 'in-stock' | 'low-stock' | 'out-of-stock';\r\n\r\nexport default function VendorProducts() {\r\n  const { pushToast } = useToast();\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [mode, setMode] = useState<'list' | 'create' | 'edit'>('list');\r\n  const [editingId, setEditingId] = useState<string | null>(null);\r\n  const [formData, setFormData] = useState<Partial<Product>>(emptyProduct);\r\n  const [vendorId, setVendorId] = useState<string>('');\r\n  const [vendorCategory, setVendorCategory] = useState<string>('');\r\n  \r\n  // Filter states\r\n  const [productSearch, setProductSearch] = useState<string>('');\r\n  const [debouncedProductSearch, setDebouncedProductSearch] = useState<string>('');\r\n  const [stockStatus, setStockStatus] = useState<StockStatus>('all');\r\n  const [minPrice, setMinPrice] = useState<string>('');\r\n  const [maxPrice, setMaxPrice] = useState<string>('');\r\n  const [availabilityFilter, setAvailabilityFilter] = useState<string>('all');\r\n\r\n  useEffect(() => {\r\n    // Get vendor ID from stored user data\r\n    if (typeof window !== 'undefined') {\r\n      try {\r\n        const stored = localStorage.getItem('cc_user');\r\n        if (stored) {\r\n          const parsed = JSON.parse(stored);\r\n          setVendorId(parsed.id);\r\n        }\r\n      } catch {}\r\n    }\r\n  }, []);\r\n\r\n  // Debounce product search\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setDebouncedProductSearch(productSearch);\r\n    }, 300);\r\n    return () => clearTimeout(timer);\r\n  }, [productSearch]);\r\n\r\n  // Load products and vendor meta when vendorId is set\r\n  useEffect(() => {\r\n    if (vendorId) {\r\n      loadVendorMeta();\r\n      loadProducts();\r\n    }\r\n  }, [vendorId]);\r\n\r\n  const loadVendorMeta = async () => {\r\n    try {\r\n      const vendor = await api.vendors.getById(vendorId);\r\n      setVendorCategory(vendor?.vendorType || vendor?.storeName || '');\r\n    } catch (error) {\r\n      console.error('Error loading vendor details:', error);\r\n    }\r\n  };\r\n\r\n  const loadProducts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await api.products.getAll();\r\n      // Filter products for current vendor\r\n      const vendorProducts = data.filter((p: Product) => {\r\n        if (!p.vendor) return false;\r\n        // p.vendor can be either a string (ID) or an object (populated)\r\n        const pVendorId = typeof p.vendor === 'object' ? (p.vendor as any)._id : p.vendor;\r\n        return pVendorId === vendorId;\r\n      });\r\n      setProducts(vendorProducts);\r\n    } catch (error) {\r\n      console.error('Error loading products:', error);\r\n      pushToast({ type: 'error', title: 'Load Failed', message: 'Failed to load products' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Filter products based on search and filters\r\n  const filteredProducts: Product[] = (() => {\r\n    let filtered = [...products];\r\n\r\n    // Product search\r\n    if (debouncedProductSearch.trim()) {\r\n      const search = debouncedProductSearch.toLowerCase();\r\n      filtered = filtered.filter(p => p.name.toLowerCase().includes(search));\r\n    }\r\n\r\n    // Stock status filter\r\n    if (stockStatus !== 'all') {\r\n      filtered = filtered.filter(p => {\r\n        if (stockStatus === 'in-stock') return p.stock > 10;\r\n        if (stockStatus === 'low-stock') return p.stock > 0 && p.stock <= 10;\r\n        if (stockStatus === 'out-of-stock') return p.stock === 0;\r\n        return true;\r\n      });\r\n    }\r\n\r\n    // Price range filter\r\n    const min = minPrice ? parseFloat(minPrice) : null;\r\n    const max = maxPrice ? parseFloat(maxPrice) : null;\r\n    if (min !== null || max !== null) {\r\n      filtered = filtered.filter(p => {\r\n        if (min !== null && p.price < min) return false;\r\n        if (max !== null && p.price > max) return false;\r\n        return true;\r\n      });\r\n    }\r\n\r\n    // Availability filter\r\n    if (availabilityFilter === 'active') {\r\n      filtered = filtered.filter(p => p.isAvailable);\r\n    } else if (availabilityFilter === 'disabled') {\r\n      filtered = filtered.filter(p => !p.isAvailable);\r\n    }\r\n\r\n    return filtered;\r\n  })();\r\n\r\n  const handleCreate = () => {\r\n    setMode('create');\r\n    setFormData({ ...emptyProduct, vendor: vendorId, category: vendorCategory });\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleEdit = async (id: string) => {\r\n    try {\r\n      const product = await api.products.getById(id);\r\n      setFormData(product);\r\n      setEditingId(id);\r\n      setMode('edit');\r\n    } catch (error) {\r\n      console.error('Error loading product:', error);\r\n      pushToast({ type: 'error', title: 'Load Failed', message: 'Failed to load product details' });\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!confirm('Are you sure you want to delete this product?')) return;\r\n    try {\r\n      await api.products.delete(id);\r\n      pushToast({ type: 'success', title: 'Deleted', message: 'Product deleted successfully' });\r\n      loadProducts();\r\n    } catch (error) {\r\n      console.error('Error deleting product:', error);\r\n      pushToast({ type: 'error', title: 'Delete Failed', message: 'Failed to delete product' });\r\n    }\r\n  };\r\n\r\n  const handleToggleAvailability = async (product: Product) => {\r\n    try {\r\n      await api.products.update(product._id, {\r\n        ...product,\r\n        isAvailable: !product.isAvailable,\r\n      });\r\n      loadProducts();\r\n    } catch (error) {\r\n      console.error('Error updating product:', error);\r\n      pushToast({ type: 'error', title: 'Update Failed', message: 'Failed to update product availability' });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      setLoading(true);\r\n      const payload = {\r\n        ...formData,\r\n        vendor: vendorId,\r\n        category: vendorCategory || formData.category,\r\n      };\r\n      if (mode === 'create') {\r\n        await api.products.create(payload);\r\n        pushToast({ type: 'success', title: 'Saved', message: 'Product created successfully' });\r\n      } else {\r\n        await api.products.update(editingId!, payload);\r\n        pushToast({ type: 'success', title: 'Saved', message: 'Product updated successfully' });\r\n      }\r\n      setMode('list');\r\n      loadProducts();\r\n    } catch (error) {\r\n      console.error('Error saving product:', error);\r\n      pushToast({ type: 'error', title: 'Save Failed', message: 'Failed to save product' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setMode('list');\r\n    setFormData(emptyProduct);\r\n    setEditingId(null);\r\n  };\r\n\r\n  const handleImageFile = (file: File | null) => {\r\n    if (!file) {\r\n      updateField('image', '');\r\n      return;\r\n    }\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      updateField('image', reader.result as string);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  };\r\n\r\n  const updateField = (field: string, value: any) => {\r\n    setFormData((prev) => ({ ...prev, [field]: value }));\r\n  };\r\n\r\n  if (mode === 'list') {\r\n    return (\r\n      <>\r\n        <div className=\"products-header\">\r\n          <h1 className=\"products-title\">Products</h1>\r\n          <button className=\"btn-primary\" onClick={handleCreate}>\r\n            Add New Product\r\n          </button>\r\n        </div>\r\n\r\n        {loading ? (\r\n          <div className=\"products-loading\">Loading products...</div>\r\n        ) : (\r\n          <>\r\n            {/* FILTERS SECTION */}\r\n            <div className=\"products-filters\">\r\n              {/* ROW 1: Product Search + Stock Status Tabs */}\r\n              <div className=\"filters-row-1\">\r\n                <div className=\"product-search-wrapper\">\r\n                  <input\r\n                    type=\"text\"\r\n                    className=\"search-input\"\r\n                    placeholder=\"Search by product name...\"\r\n                    value={productSearch}\r\n                    onChange={(e) => setProductSearch(e.target.value)}\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"stock-status-tabs\">\r\n                  <button\r\n                    className={`status-tab ${stockStatus === 'all' ? 'active' : ''}`}\r\n                    onClick={() => setStockStatus('all')}\r\n                  >\r\n                    All\r\n                  </button>\r\n                  <button\r\n                    className={`status-tab ${stockStatus === 'in-stock' ? 'active' : ''}`}\r\n                    onClick={() => setStockStatus('in-stock')}\r\n                  >\r\n                    In Stock\r\n                  </button>\r\n                  <button\r\n                    className={`status-tab ${stockStatus === 'low-stock' ? 'active' : ''}`}\r\n                    onClick={() => setStockStatus('low-stock')}\r\n                  >\r\n                    Low Stock\r\n                  </button>\r\n                  <button\r\n                    className={`status-tab ${stockStatus === 'out-of-stock' ? 'active' : ''}`}\r\n                    onClick={() => setStockStatus('out-of-stock')}\r\n                  >\r\n                    Out of Stock\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              {/* ROW 2: Price Range + Availability + Clear */}\r\n              <div className=\"filters-row-2\">\r\n                <div className=\"price-range-wrapper\">\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"price-input\"\r\n                    placeholder=\"Min Price\"\r\n                    value={minPrice}\r\n                    onChange={(e) => setMinPrice(e.target.value)}\r\n                    min=\"0\"\r\n                  />\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"price-input\"\r\n                    placeholder=\"Max Price\"\r\n                    value={maxPrice}\r\n                    onChange={(e) => setMaxPrice(e.target.value)}\r\n                    min=\"0\"\r\n                  />\r\n                </div>\r\n\r\n                <div className=\"availability-toggle\">\r\n                  <button\r\n                    className={`availability-pill ${availabilityFilter === 'all' ? 'active' : ''}`}\r\n                    onClick={() => setAvailabilityFilter('all')}\r\n                  >\r\n                    All\r\n                  </button>\r\n                  <button\r\n                    className={`availability-pill ${availabilityFilter === 'active' ? 'active' : ''}`}\r\n                    onClick={() => setAvailabilityFilter('active')}\r\n                  >\r\n                    Active\r\n                  </button>\r\n                  <button\r\n                    className={`availability-pill ${availabilityFilter === 'disabled' ? 'active' : ''}`}\r\n                    onClick={() => setAvailabilityFilter('disabled')}\r\n                  >\r\n                    Disabled\r\n                  </button>\r\n                </div>\r\n\r\n                <button\r\n                  type=\"button\"\r\n                  className=\"clear-filters-btn\"\r\n                  onClick={() => {\r\n                    setProductSearch('');\r\n                    setStockStatus('all');\r\n                    setMinPrice('');\r\n                    setMaxPrice('');\r\n                    setAvailabilityFilter('all');\r\n                  }}\r\n                >\r\n                  Clear\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* STATS CARDS */}\r\n            <div className=\"products-stats\">\r\n              <div className=\"stat-card\">\r\n                <div className=\"stat-label\">Total Products</div>\r\n                <div className=\"stat-value\">{filteredProducts.length}</div>\r\n              </div>\r\n              <div className=\"stat-card\">\r\n                <div className=\"stat-label\">Available</div>\r\n                <div className=\"stat-value\">{filteredProducts.filter((p) => p.isAvailable).length}</div>\r\n              </div>\r\n              <div className=\"stat-card\">\r\n                <div className=\"stat-label\">Out of Stock</div>\r\n                <div className=\"stat-value\">{filteredProducts.filter((p) => p.stock === 0).length}</div>\r\n              </div>\r\n              <div className=\"stat-card\">\r\n                <div className=\"stat-label\">Low Stock</div>\r\n                <div className=\"stat-value\">{filteredProducts.filter((p) => p.stock > 0 && p.stock < 10).length}</div>\r\n              </div>\r\n            </div>\r\n\r\n            <section className=\"products-section\">\r\n              <h2 className=\"section-title\">Product List</h2>\r\n              <div className=\"products-table-wrap\">\r\n                <table className=\"products-table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Category</th>\r\n                      <th>Price</th>\r\n                      <th>Stock</th>\r\n                      <th>Status</th>\r\n                      <th>Actions</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {filteredProducts.map((product) => (\r\n                      <tr key={product._id}>\r\n                        <td>\r\n                          <div className=\"product-name-cell\">\r\n                            {product.image && (\r\n                              <img src={product.image} alt={product.name} className=\"product-thumb\" />\r\n                            )}\r\n                            <div>\r\n                              <div className=\"product-name\">{product.name}</div>\r\n                              {product.description && (\r\n                                <div className=\"product-desc\">{product.description.substring(0, 50)}...</div>\r\n                              )}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                        <td>{vendorCategory || product.category || '—'}</td>\r\n                        <td>₹{product.price.toFixed(2)}</td>\r\n                        <td>\r\n                          <span\r\n                            className={`stock-badge ${\r\n                              product.stock === 0 ? 'out' : product.stock < 10 ? 'low' : 'good'\r\n                            }`}\r\n                          >\r\n                            {product.stock}\r\n                          </span>\r\n                        </td>\r\n                        <td>\r\n                          <span className={`status-badge ${product.isAvailable ? 'active' : 'inactive'}`}>\r\n                            {product.isAvailable ? 'Available' : 'Disabled'}\r\n                          </span>\r\n                        </td>\r\n                        <td>\r\n                          <div className=\"action-btns\">\r\n                            <button className=\"btn-edit\" onClick={() => handleEdit(product._id)}>\r\n                              Edit\r\n                            </button>\r\n                            <button\r\n                              className={`btn-toggle ${product.isAvailable ? 'disable' : 'enable'}`}\r\n                              onClick={() => handleToggleAvailability(product)}\r\n                            >\r\n                              {product.isAvailable ? 'Disable' : 'Enable'}\r\n                            </button>\r\n                            <button className=\"btn-delete\" onClick={() => handleDelete(product._id)}>\r\n                              Delete\r\n                            </button>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    ))}\r\n                    {products.length === 0 && (\r\n                      <tr>\r\n                        <td colSpan={6} className=\"empty-state\">\r\n                          No products found. Add your first product to get started!\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </section>\r\n          </>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"products-header\">\r\n        <h1 className=\"products-title\">{mode === 'create' ? 'Add New Product' : 'Edit Product'}</h1>\r\n        <button className=\"btn-secondary\" onClick={handleCancel}>\r\n          Back to List\r\n        </button>\r\n      </div>\r\n\r\n      <form className=\"product-form\" onSubmit={handleSubmit}>\r\n        <div className=\"form-section\">\r\n          <h3 className=\"form-section-title\">Product Information</h3>\r\n          <div className=\"form-grid\">\r\n            <div className=\"form-field\">\r\n              <label>Product Name *</label>\r\n              <input\r\n                type=\"text\"\r\n                required\r\n                value={formData.name || ''}\r\n                onChange={(e) => updateField('name', e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"form-field\">\r\n              <label>Price (₹) *</label>\r\n              <input\r\n                type=\"number\"\r\n                required\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                value={formData.price || ''}\r\n                onChange={(e) => updateField('price', Number(e.target.value))}\r\n              />\r\n            </div>\r\n            <div className=\"form-field\">\r\n              <label>MRP (₹)</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                step=\"0.01\"\r\n                value={formData.mrp || ''}\r\n                onChange={(e) => updateField('mrp', Number(e.target.value))}\r\n              />\r\n            </div>\r\n            <div className=\"form-field\">\r\n              <label>Stock Quantity *</label>\r\n              <input\r\n                type=\"number\"\r\n                required\r\n                min=\"0\"\r\n                value={formData.stock || ''}\r\n                onChange={(e) => updateField('stock', Number(e.target.value))}\r\n              />\r\n            </div>\r\n            <div className=\"form-field\">\r\n              <label>Threshold</label>\r\n              <input\r\n                type=\"number\"\r\n                min=\"0\"\r\n                value={formData.threshold || ''}\r\n                onChange={(e) => updateField('threshold', Number(e.target.value))}\r\n              />\r\n            </div>\r\n            <div className=\"form-field\">\r\n              <label>Category (from vendor)</label>\r\n              <input type=\"text\" value={vendorCategory || 'Not set'} disabled />\r\n            </div>\r\n            <div className=\"form-field form-field-full\">\r\n              <label>Description</label>\r\n              <textarea\r\n                rows={3}\r\n                value={formData.description || ''}\r\n                onChange={(e) => updateField('description', e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"form-field form-field-full\">\r\n              <label>Product Image (optional)</label>\r\n              <input\r\n                type=\"file\"\r\n                accept=\"image/png, image/jpeg, image/jpg, image/webp\"\r\n                onChange={(e) => handleImageFile(e.target.files?.[0] || null)}\r\n              />\r\n              {formData.image && (\r\n                <div className=\"image-preview\">\r\n                  <img src={formData.image} alt=\"Preview\" />\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"form-field form-field-checkbox\">\r\n              <label>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={formData.isAvailable || false}\r\n                  onChange={(e) => updateField('isAvailable', e.target.checked)}\r\n                />\r\n                Available for Sale\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"form-actions\">\r\n          <button type=\"button\" className=\"btn-secondary\" onClick={handleCancel}>\r\n            Cancel\r\n          </button>\r\n          <button type=\"submit\" className=\"btn-primary\" disabled={loading}>\r\n            {loading ? 'Saving...' : mode === 'create' ? 'Add Product' : 'Update Product'}\r\n          </button>\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}