{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/pages/customer/verify-mobile.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useState } from 'react';\r\n\r\nexport default function VerifyMobile() {\r\n    const router = useRouter();\r\n    const params = useSearchParams();\r\n\r\n    const intent = params.get('intent'); // signup_phone | google_signup_phone\r\n    const email = params.get('email') || '';\r\n\r\n    console.log('[VerifyMobile] Component Rendered', { intent, email });\r\n\r\n    const [mobile, setMobile] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n\r\n    const handleSendOtp = async () => {\r\n        console.log('[VerifyMobile] handleSendOtp called', { mobile, email, intent });\r\n        if (mobile.length !== 10) {\r\n            setError('Enter a valid 10-digit mobile number');\r\n            return;\r\n        }\r\n\r\n        if (!email) {\r\n            setError('Email missing. Please restart signup.');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const res = await fetch(\r\n                'http://localhost:5000/api/auth/customer/signup/add-mobile',\r\n                {\r\n                    method: 'POST',\r\n                    headers: { 'Content-Type': 'application/json' },\r\n                    body: JSON.stringify({ email, mobile }),\r\n                }\r\n            );\r\n\r\n            const data = await res.json();\r\n            if (!res.ok) throw new Error(data.message || 'Failed to send OTP');\r\n\r\n            console.log('[VerifyMobile] API Success', data);\r\n\r\n            router.push(\r\n                `/customer/verify-otp?intent=${intent}&email=${encodeURIComponent(\r\n                    email\r\n                )}&mobile=${mobile}`\r\n            );\r\n        } catch (err: any) {\r\n            console.error('[VerifyMobile] Error:', err);\r\n            setError(err.message);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"verify-mobile-page\">\r\n            <div className=\"vm-header\">\r\n                <button\r\n                    className=\"vm-back-button\"\r\n                    onClick={() => router.back()}\r\n                >\r\n                    <img\r\n                        src=\"/customer/assets/icons/backward.svg\"\r\n                        alt=\"back\"\r\n                        className=\"vm-back-icon\"\r\n                    />\r\n                </button>\r\n                <h1 className=\"vm-title\">Verify Mobile Number</h1>\r\n            </div>\r\n\r\n            <p className=\"vm-subtitle\">\r\n                Please enter your mobile number to receive a verification code.\r\n            </p>\r\n\r\n            <div className=\"vm-content\">\r\n                {error && <p style={{ color: 'red', textAlign: 'center' }}>{error}</p>}\r\n\r\n                <div className=\"vm-input-group\">\r\n                    <span className=\"vm-input-label\">Mobile Number</span>\r\n                    <div className=\"vm-input-field\">\r\n                        <div className=\"vm-prefix-container\">\r\n                            <span className=\"vm-prefix\">+91</span>\r\n                            <div className=\"vm-divider\" />\r\n                        </div>\r\n                        <input\r\n                            type=\"tel\"\r\n                            className=\"vm-phone-input\"\r\n                            placeholder=\"Enter 10 digit mobile number\"\r\n                            value={mobile}\r\n                            maxLength={10}\r\n                            onChange={(e) => setMobile(e.target.value.replace(/\\D/g, ''))}\r\n                        />\r\n                        <img\r\n                            src=\"/customer/assets/icons/phone.svg\"\r\n                            alt=\"phone\"\r\n                            className=\"vm-input-icon-right\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                <button\r\n                    className=\"vm-verify-button\"\r\n                    onClick={handleSendOtp}\r\n                    disabled={loading}\r\n                >\r\n                    {loading ? 'Sending OTP...' : 'Get OTP'}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACpB,MAAM,SAAS,IAAA,oLAAS;IACxB,MAAM,SAAS,IAAA,0LAAe;IAE9B,MAAM,SAAS,OAAO,GAAG,CAAC,WAAW,qCAAqC;IAC1E,MAAM,QAAQ,OAAO,GAAG,CAAC,YAAY;IAErC,QAAQ,GAAG,CAAC,qCAAqC;QAAE;QAAQ;IAAM;IAEjE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAC;IAEnC,MAAM,gBAAgB;QAClB,QAAQ,GAAG,CAAC,uCAAuC;YAAE;YAAQ;YAAO;QAAO;QAC3E,IAAI,OAAO,MAAM,KAAK,IAAI;YACtB,SAAS;YACT;QACJ;QAEA,IAAI,CAAC,OAAO;YACR,SAAS;YACT;QACJ;QAEA,WAAW;QACX,SAAS;QAET,IAAI;YACA,MAAM,MAAM,MAAM,MACd,6DACA;gBACI,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAO;gBAAO;YACzC;YAGJ,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM,KAAK,OAAO,IAAI;YAE7C,QAAQ,GAAG,CAAC,8BAA8B;YAE1C,OAAO,IAAI,CACP,CAAC,4BAA4B,EAAE,OAAO,OAAO,EAAE,mBAC3C,OACF,QAAQ,EAAE,QAAQ;QAE5B,EAAE,OAAO,KAAU;YACf,QAAQ,KAAK,CAAC,yBAAyB;YACvC,SAAS,IAAI,OAAO;QACxB,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,qKAAC;QAAI,WAAU;;0BACX,qKAAC;gBAAI,WAAU;;kCACX,qKAAC;wBACG,WAAU;wBACV,SAAS,IAAM,OAAO,IAAI;kCAE1B,cAAA,qKAAC;4BACG,KAAI;4BACJ,KAAI;4BACJ,WAAU;;;;;;;;;;;kCAGlB,qKAAC;wBAAG,WAAU;kCAAW;;;;;;;;;;;;0BAG7B,qKAAC;gBAAE,WAAU;0BAAc;;;;;;0BAI3B,qKAAC;gBAAI,WAAU;;oBACV,uBAAS,qKAAC;wBAAE,OAAO;4BAAE,OAAO;4BAAO,WAAW;wBAAS;kCAAI;;;;;;kCAE5D,qKAAC;wBAAI,WAAU;;0CACX,qKAAC;gCAAK,WAAU;0CAAiB;;;;;;0CACjC,qKAAC;gCAAI,WAAU;;kDACX,qKAAC;wCAAI,WAAU;;0DACX,qKAAC;gDAAK,WAAU;0DAAY;;;;;;0DAC5B,qKAAC;gDAAI,WAAU;;;;;;;;;;;;kDAEnB,qKAAC;wCACG,MAAK;wCACL,WAAU;wCACV,aAAY;wCACZ,OAAO;wCACP,WAAW;wCACX,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC,OAAO;;;;;;kDAE7D,qKAAC;wCACG,KAAI;wCACJ,KAAI;wCACJ,WAAU;;;;;;;;;;;;;;;;;;kCAKtB,qKAAC;wBACG,WAAU;wBACV,SAAS;wBACT,UAAU;kCAET,UAAU,mBAAmB;;;;;;;;;;;;;;;;;;AAKlD"}}]
}