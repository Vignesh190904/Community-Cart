{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/pages/customer/BottomNavbar.tsx"],"sourcesContent":["import { useRouter } from 'next/router';\r\nimport Link from 'next/link';\r\n\r\nconst NAV_ITEMS = [\r\n    { href: '/customer/home', label: 'Home', icon: '/customer/assets/icons/home.svg' },\r\n    { href: '/customer/browse-products', label: 'Search', icon: '/customer/assets/icons/search.svg' },\r\n    { href: '/customer/cart', label: 'Cart', icon: '/customer/assets/icons/cart.svg' },\r\n    { href: '/customer/orders', label: 'Orders', icon: '/customer/assets/icons/order.svg' },\r\n    { href: '/customer/profile', label: 'Profile', icon: '/customer/assets/icons/profile.svg' },\r\n];\r\n\r\nexport default function BottomNavbar() {\r\n    const router = useRouter();\r\n\r\n    return (\r\n        <nav className=\"customer-bottom-nav\">\r\n            {NAV_ITEMS.map((item) => {\r\n                // Precise active check: \r\n                // Home only matches exactly, others match by prefix to handle sub-routes\r\n                const is_active = item.href === '/customer/home'\r\n                    ? router.pathname === item.href\r\n                    : router.pathname.startsWith(item.href);\r\n\r\n                return (\r\n                    <Link\r\n                        key={item.href}\r\n                        href={item.href}\r\n                        className={`bottom-nav-item ${is_active ? 'active' : ''}`}\r\n                    >\r\n                        <img\r\n                            src={item.icon}\r\n                            alt={item.label}\r\n                            className=\"nav-icon-img\"\r\n                        />\r\n                    </Link>\r\n                );\r\n            })}\r\n        </nav>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,MAAM,YAAY;IACd;QAAE,MAAM;QAAkB,OAAO;QAAQ,MAAM;IAAkC;IACjF;QAAE,MAAM;QAA6B,OAAO;QAAU,MAAM;IAAoC;IAChG;QAAE,MAAM;QAAkB,OAAO;QAAQ,MAAM;IAAkC;IACjF;QAAE,MAAM;QAAoB,OAAO;QAAU,MAAM;IAAmC;IACtF;QAAE,MAAM;QAAqB,OAAO;QAAW,MAAM;IAAqC;CAC7F;AAEc,SAAS;IACpB,MAAM,SAAS,IAAA,gLAAS;IAExB,qBACI,qKAAC;QAAI,WAAU;kBACV,UAAU,GAAG,CAAC,CAAC;YACZ,yBAAyB;YACzB,yEAAyE;YACzE,MAAM,YAAY,KAAK,IAAI,KAAK,mBAC1B,OAAO,QAAQ,KAAK,KAAK,IAAI,GAC7B,OAAO,QAAQ,CAAC,UAAU,CAAC,KAAK,IAAI;YAE1C,qBACI,qKAAC,4KAAI;gBAED,MAAM,KAAK,IAAI;gBACf,WAAW,CAAC,gBAAgB,EAAE,YAAY,WAAW,IAAI;0BAEzD,cAAA,qKAAC;oBACG,KAAK,KAAK,IAAI;oBACd,KAAK,KAAK,KAAK;oBACf,WAAU;;;;;;eAPT,KAAK,IAAI;;;;;QAW1B;;;;;;AAGZ"}},
    {"offset": {"line": 83, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/components/customer/CustomerLayout.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport { useRouter } from 'next/router';\r\nimport { useEffect, useState } from 'react';\r\nimport BottomNavbar from '../../pages/customer/BottomNavbar';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nexport default function CustomerLayout({\r\n  children,\r\n  disablePadding = false,\r\n  fullWidth = false\r\n}: {\r\n  children: React.ReactNode;\r\n  disablePadding?: boolean;\r\n  fullWidth?: boolean\r\n}) {\r\n  const router = useRouter();\r\n  const { is_authenticated, loading, onboarding_step, get_route_for_step } = useAuth();\r\n  const [isDark, setIsDark] = useState<boolean>(false);\r\n\r\n  // 1. THEME LOGIC\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const theme = localStorage.getItem('cc_theme');\r\n      const prefersDark = theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches);\r\n      setIsDark(prefersDark);\r\n      if (prefersDark) {\r\n        document.body.classList.add('theme-dark');\r\n      } else {\r\n        document.body.classList.remove('theme-dark');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // 2. THEME TOGGLE EXPORT\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      (window as any).toggleCustomerTheme = () => {\r\n        const newTheme = !isDark;\r\n        setIsDark(newTheme);\r\n        if (newTheme) {\r\n          document.body.classList.add('theme-dark');\r\n          localStorage.setItem('cc_theme', 'dark');\r\n        } else {\r\n          document.body.classList.remove('theme-dark');\r\n          localStorage.setItem('cc_theme', 'light');\r\n        }\r\n      };\r\n    }\r\n  }, [isDark]);\r\n\r\n  // 3. GLOBAL AUTHENTICATION GUARD\r\n  useEffect(() => {\r\n    // Prevent auto-logout/redirect loop by waiting for AuthContext to finish loading\r\n    if (!loading) {\r\n      if (!is_authenticated) {\r\n        // No valid session found after revalidation\r\n        router.replace('/customer/signin');\r\n      } else if (onboarding_step && onboarding_step !== 'PHONE_VERIFIED') {\r\n        // Session valid but onboarding incomplete\r\n        const correct_route = get_route_for_step(onboarding_step);\r\n        // Prevent infinite redirect if we are already on that route\r\n        if (router.pathname !== correct_route) {\r\n          router.replace(correct_route);\r\n        }\r\n      }\r\n    }\r\n  }, [is_authenticated, loading, onboarding_step, router, get_route_for_step]);\r\n\r\n  // 4. LOADING STATE\r\n  // Show a clean loading screen while AuthContext verifies the token/cookie\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        height: '100vh',\r\n        width: '100vw',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: isDark ? '#121212' : '#ffffff',\r\n        color: isDark ? '#ffffff' : '#000000',\r\n        fontFamily: 'sans-serif'\r\n      }}>\r\n        <div style={{ textAlign: 'center' }}>\r\n          <p style={{ fontWeight: '500', fontSize: '16px' }}>Securely loading session...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 5. RENDER PROTECTION\r\n  // If not authenticated and finished loading, render nothing while redirecting\r\n  if (!is_authenticated) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`customer-shell ${fullWidth ? 'full-width' : ''}`}>\r\n      <main className={`customer-main ${disablePadding ? 'no-padding' : ''} page-transition`}>\r\n        {children}\r\n      </main>\r\n      <BottomNavbar />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;;;;AAEe,SAAS,eAAe,EACrC,QAAQ,EACR,iBAAiB,KAAK,EACtB,YAAY,KAAK,EAKlB;IACC,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,EAAE,gBAAgB,EAAE,OAAO,EAAE,eAAe,EAAE,kBAAkB,EAAE,GAAG,IAAA,8KAAO;IAClF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAU;IAE9C,iBAAiB;IACjB,IAAA,gHAAS,EAAC;QACR;;IAUF,GAAG,EAAE;IAEL,yBAAyB;IACzB,IAAA,gHAAS,EAAC;QACR;;IAaF,GAAG;QAAC;KAAO;IAEX,iCAAiC;IACjC,IAAA,gHAAS,EAAC;QACR,iFAAiF;QACjF,IAAI,CAAC,SAAS;YACZ,IAAI,CAAC,kBAAkB;gBACrB,4CAA4C;gBAC5C,OAAO,OAAO,CAAC;YACjB,OAAO,IAAI,mBAAmB,oBAAoB,kBAAkB;gBAClE,0CAA0C;gBAC1C,MAAM,gBAAgB,mBAAmB;gBACzC,4DAA4D;gBAC5D,IAAI,OAAO,QAAQ,KAAK,eAAe;oBACrC,OAAO,OAAO,CAAC;gBACjB;YACF;QACF;IACF,GAAG;QAAC;QAAkB;QAAS;QAAiB;QAAQ;KAAmB;IAE3E,mBAAmB;IACnB,0EAA0E;IAC1E,IAAI,SAAS;QACX,qBACE,qKAAC;YAAI,OAAO;gBACV,QAAQ;gBACR,OAAO;gBACP,SAAS;gBACT,gBAAgB;gBAChB,YAAY;gBACZ,iBAAiB,SAAS,YAAY;gBACtC,OAAO,SAAS,YAAY;gBAC5B,YAAY;YACd;sBACE,cAAA,qKAAC;gBAAI,OAAO;oBAAE,WAAW;gBAAS;0BAChC,cAAA,qKAAC;oBAAE,OAAO;wBAAE,YAAY;wBAAO,UAAU;oBAAO;8BAAG;;;;;;;;;;;;;;;;IAI3D;IAEA,uBAAuB;IACvB,8EAA8E;IAC9E,IAAI,CAAC,kBAAkB;QACrB,OAAO;IACT;IAEA,qBACE,qKAAC;QAAI,WAAW,CAAC,eAAe,EAAE,YAAY,eAAe,IAAI;;0BAC/D,qKAAC;gBAAK,WAAW,CAAC,cAAc,EAAE,iBAAiB,eAAe,GAAG,gBAAgB,CAAC;0BACnF;;;;;;0BAEH,qKAAC,yLAAY;;;;;;;;;;;AAGnB"}},
    {"offset": {"line": 208, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/pages/customer/checkout.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport { useCustomerStore } from '../../context/CustomerStore';\r\nimport CustomerLayout from '../../components/customer/CustomerLayout';\r\nimport { useToast } from '../../components/ui/ToastProvider';\r\n\r\nexport default function CheckoutPage() {\r\n    const router = useRouter();\r\n    const { cart, totalPrice, totalItems } = useCustomerStore();\r\n    const { pushToast } = useToast();\r\n\r\n    // Address State\r\n    const [addressType, setAddressType] = useState<'Main' | 'Second'>('Main');\r\n\r\n    const handlePlaceOrder = () => {\r\n        // 1. Validate Cart\r\n        if (cart.length === 0) {\r\n            pushToast({ type: 'error', title: 'Empty Cart', message: 'Add items before checking out' });\r\n            return;\r\n        }\r\n\r\n        // 2. Validate Address (Implicitly always selected by toggle default, but good to check)\r\n        if (!addressType) {\r\n            pushToast({ type: 'error', title: 'Address Required', message: 'Please select an address' });\r\n            return;\r\n        }\r\n\r\n        // 3. Log Payload\r\n        const payload = {\r\n            cartItems: cart.map(item => ({\r\n                id: item.product._id,\r\n                name: item.product.name,\r\n                price: item.product.price,\r\n                quantity: item.quantity,\r\n                total: item.product.price * item.quantity\r\n            })),\r\n            totalAmount: totalPrice,\r\n            selectedAddress: addressType\r\n        };\r\n\r\n        console.log('Place Order Payload:', payload);\r\n        pushToast({ type: 'success', title: 'Order Placed', message: 'Order logged to console!' });\r\n\r\n        // Optional: clear cart or navigate away? \r\n        // User requirement: \"Log payload structure in console\". \r\n        // Stub logic is fine. I won't clear cart to maintain state for demo unless asked.\r\n    };\r\n\r\n    return (\r\n        <CustomerLayout disablePadding={true}>\r\n            {/* Import CSS here or in _app, but since we are using CSS modules or global, \r\n          and Next.js pages usually require global import in _app, \r\n          we might need to use a <style> tag or ensure the CSS file is imported. \r\n          Given the constraints \"Plain CSS\", I will assume we can import it directly \r\n          if configured, or I will use a scoped approach.\r\n          To be safe with Next.js standard CSS support:\r\n      */}\r\n            <style jsx global>{`\r\n        @import url('/customer/assets/css/checkout.css'); \r\n        /* Since we can't easily add to global build pipeline here, \r\n           I wrote to checkout.css. I will try to direct import it if Next.js allows, \r\n           otherwise I'll inline the critical styles or rely on the written file being imported somewhere.\r\n           Wait, locally created CSS files in pages directory usually need to be imported.\r\n        */\r\n      `}</style>\r\n            {/* \r\n        Actually, the best way given the setup is to import the CSS file directly if Next.js config allows global css from anywhere (likely not) \r\n        or use CSS Modules. The user said \"React + plain CSS\".\r\n        Let's try a direct import at top.\r\n      */}\r\n\r\n            <div className=\"checkout-page\">\r\n\r\n                {/* 1. Page Header */}\r\n                <header className=\"checkout-header\">\r\n                    <button className=\"checkout-back-btn\" onClick={() => router.back()}>\r\n                        {/* Using existing icon asset if available, else simple arrow */}\r\n                        <img src=\"/customer/assets/icons/backward.svg\" alt=\"Back\" width={24} height={24} />\r\n                    </button>\r\n                    <h1 className=\"checkout-title\">Checkout</h1>\r\n                </header>\r\n\r\n                {/* 2. Order Summary (Scrollable) */}\r\n                <section className=\"order-summary-section\">\r\n                    <h2 className=\"summary-title\">Order Summary</h2>\r\n\r\n                    <div className=\"summary-list\">\r\n                        {cart.map((item) => (\r\n                            <div key={item.product._id} className=\"summary-row\">\r\n                                <div className=\"item-info\">\r\n                                    <span className=\"item-name\">{item.product.name}</span>\r\n                                    <span className=\"item-qty\">x {item.quantity}</span>\r\n                                </div>\r\n                                <span className=\"item-price\">₹{(item.product.price * item.quantity).toFixed(2)}</span>\r\n                            </div>\r\n                        ))}\r\n                        {cart.length === 0 && (\r\n                            <p className=\"summary-row\" style={{ justifyContent: 'center', opacity: 0.5 }}>No items in cart</p>\r\n                        )}\r\n                    </div>\r\n                </section>\r\n\r\n                {/* 3. Fixed Bottom Summary Section */}\r\n                <footer className=\"bottom-summary-section\">\r\n                    {/* Items Count and Total */}\r\n                    {/* Requirement says:\r\n               Items 6\r\n               Total ₹58.20\r\n               Layout: \"Items\" label ... \"6\" value\r\n               \"Total\" label ... \"₹58.20\" value\r\n               Or grouped? The request says:\r\n               - Items count (Example: Items 6)\r\n               - Total amount (Example: Total ₹58.20)\r\n               The screenshot implies separate rows or a clean summary block. \r\n               The mockup shows:\r\n               Items       6\r\n               Total   ₹58.2\r\n           */}\r\n\r\n                    <div className=\"bottom-row\">\r\n                        <span className=\"bottom-label\">Items</span>\r\n                        <span className=\"bottom-value\">{totalItems}</span>\r\n                    </div>\r\n\r\n                    <div className=\"bottom-row total-row\">\r\n                        <span className=\"bottom-label\">Total</span>\r\n                        <span className=\"bottom-value\">₹{totalPrice.toFixed(2)}</span>\r\n                    </div>\r\n\r\n                    {/* Address Selector */}\r\n                    <div className=\"address-selector\">\r\n                        <button\r\n                            className={`address-pill ${addressType === 'Main' ? 'active' : ''}`}\r\n                            onClick={() => setAddressType('Main')}\r\n                        >\r\n                            Main\r\n                        </button>\r\n                        <button\r\n                            className={`address-pill ${addressType === 'Second' ? 'active' : ''}`}\r\n                            onClick={() => setAddressType('Second')}\r\n                        >\r\n                            Second\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Place Order Button */}\r\n                    <button className=\"place-order-btn\" onClick={handlePlaceOrder}>\r\n                        Place Order\r\n                    </button>\r\n                </footer>\r\n            </div>\r\n        </CustomerLayout>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}