{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/pages/customer/BottomNavbar.tsx"],"sourcesContent":["import { useRouter } from 'next/router';\r\nimport Link from 'next/link';\r\n\r\nconst NAV_ITEMS = [\r\n    { href: '/customer/home', label: 'Home', icon: '/customer/assets/icons/home.svg' },\r\n    { href: '/customer/browse-products', label: 'Search', icon: '/customer/assets/icons/search.svg' },\r\n    { href: '/customer/cart', label: 'Cart', icon: '/customer/assets/icons/cart.svg' },\r\n    { href: '/customer/orders', label: 'Orders', icon: '/customer/assets/icons/order.svg' },\r\n    { href: '/customer/profile', label: 'Profile', icon: '/customer/assets/icons/profile.svg' },\r\n];\r\n\r\nexport default function BottomNavbar() {\r\n    const router = useRouter();\r\n\r\n    return (\r\n        <nav className=\"customer-bottom-nav\">\r\n            {NAV_ITEMS.map((item) => {\r\n                // Precise active check: \r\n                // Home only matches exactly, others match by prefix to handle sub-routes\r\n                const is_active = item.href === '/customer/home'\r\n                    ? router.pathname === item.href\r\n                    : router.pathname.startsWith(item.href);\r\n\r\n                return (\r\n                    <Link\r\n                        key={item.href}\r\n                        href={item.href}\r\n                        className={`bottom-nav-item ${is_active ? 'active' : ''}`}\r\n                    >\r\n                        <img\r\n                            src={item.icon}\r\n                            alt={item.label}\r\n                            className=\"nav-icon-img\"\r\n                        />\r\n                    </Link>\r\n                );\r\n            })}\r\n        </nav>\r\n    );\r\n}"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAEA,MAAM,YAAY;IACd;QAAE,MAAM;QAAkB,OAAO;QAAQ,MAAM;IAAkC;IACjF;QAAE,MAAM;QAA6B,OAAO;QAAU,MAAM;IAAoC;IAChG;QAAE,MAAM;QAAkB,OAAO;QAAQ,MAAM;IAAkC;IACjF;QAAE,MAAM;QAAoB,OAAO;QAAU,MAAM;IAAmC;IACtF;QAAE,MAAM;QAAqB,OAAO;QAAW,MAAM;IAAqC;CAC7F;AAEc,SAAS;IACpB,MAAM,SAAS,IAAA,gLAAS;IAExB,qBACI,qKAAC;QAAI,WAAU;kBACV,UAAU,GAAG,CAAC,CAAC;YACZ,yBAAyB;YACzB,yEAAyE;YACzE,MAAM,YAAY,KAAK,IAAI,KAAK,mBAC1B,OAAO,QAAQ,KAAK,KAAK,IAAI,GAC7B,OAAO,QAAQ,CAAC,UAAU,CAAC,KAAK,IAAI;YAE1C,qBACI,qKAAC,4KAAI;gBAED,MAAM,KAAK,IAAI;gBACf,WAAW,CAAC,gBAAgB,EAAE,YAAY,WAAW,IAAI;0BAEzD,cAAA,qKAAC;oBACG,KAAK,KAAK,IAAI;oBACd,KAAK,KAAK,KAAK;oBACf,WAAU;;;;;;eAPT,KAAK,IAAI;;;;;QAW1B;;;;;;AAGZ"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/components/customer/CustomerLayout.tsx"],"sourcesContent":["import Link from 'next/link';\r\nimport { useRouter } from 'next/router';\r\nimport { useEffect, useState } from 'react';\r\nimport BottomNavbar from '../../pages/customer/BottomNavbar';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nexport default function CustomerLayout({\r\n  children,\r\n  disablePadding = false,\r\n  fullWidth = false\r\n}: {\r\n  children: React.ReactNode;\r\n  disablePadding?: boolean;\r\n  fullWidth?: boolean\r\n}) {\r\n  const router = useRouter();\r\n  const { is_authenticated, loading } = useAuth();\r\n  const [isDark, setIsDark] = useState<boolean>(false);\r\n\r\n  // 1. THEME LOGIC\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const theme = localStorage.getItem('cc_theme');\r\n      const prefersDark = theme === 'dark' || (!theme && window.matchMedia('(prefers-color-scheme: dark)').matches);\r\n      setIsDark(prefersDark);\r\n      if (prefersDark) {\r\n        document.body.classList.add('theme-dark');\r\n      } else {\r\n        document.body.classList.remove('theme-dark');\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  // 2. THEME TOGGLE EXPORT\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      (window as any).toggleCustomerTheme = () => {\r\n        const newTheme = !isDark;\r\n        setIsDark(newTheme);\r\n        if (newTheme) {\r\n          document.body.classList.add('theme-dark');\r\n          localStorage.setItem('cc_theme', 'dark');\r\n        } else {\r\n          document.body.classList.remove('theme-dark');\r\n          localStorage.setItem('cc_theme', 'light');\r\n        }\r\n      };\r\n    }\r\n  }, [isDark]);\r\n\r\n  // 3. GLOBAL AUTHENTICATION GUARD\r\n  useEffect(() => {\r\n    // Prevent auto-logout/redirect loop by waiting for AuthContext to finish loading\r\n    if (!loading) {\r\n      if (!is_authenticated) {\r\n        // No valid session found after revalidation\r\n        router.replace('/customer/signin');\r\n      }\r\n      // Onboarding redirect logic removed - users navigate directly to Home after signup\r\n    }\r\n  }, [is_authenticated, loading, router]);\r\n\r\n  // 4. LOADING STATE\r\n  // Show a clean loading screen while AuthContext verifies the token/cookie\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        height: '100vh',\r\n        width: '100vw',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        backgroundColor: isDark ? '#121212' : '#ffffff',\r\n        color: isDark ? '#ffffff' : '#000000',\r\n        fontFamily: 'sans-serif'\r\n      }}>\r\n        <div style={{ textAlign: 'center' }}>\r\n          <p style={{ fontWeight: '500', fontSize: '16px' }}>Securely loading session...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 5. RENDER PROTECTION\r\n  // If not authenticated and finished loading, render nothing while redirecting\r\n  if (!is_authenticated) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`customer-shell ${fullWidth ? 'full-width' : ''}`}>\r\n      <main className={`customer-main ${disablePadding ? 'no-padding' : ''} page-transition`}>\r\n        {children}\r\n      </main>\r\n      <BottomNavbar />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;;;;;;AAEe,SAAS,eAAe,EACrC,QAAQ,EACR,iBAAiB,KAAK,EACtB,YAAY,KAAK,EAKlB;IACC,MAAM,SAAS,IAAA,gLAAS;IACxB,MAAM,EAAE,gBAAgB,EAAE,OAAO,EAAE,GAAG,IAAA,8KAAO;IAC7C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,+GAAQ,EAAU;IAE9C,iBAAiB;IACjB,IAAA,gHAAS,EAAC;QACR;;IAUF,GAAG,EAAE;IAEL,yBAAyB;IACzB,IAAA,gHAAS,EAAC;QACR;;IAaF,GAAG;QAAC;KAAO;IAEX,iCAAiC;IACjC,IAAA,gHAAS,EAAC;QACR,iFAAiF;QACjF,IAAI,CAAC,SAAS;YACZ,IAAI,CAAC,kBAAkB;gBACrB,4CAA4C;gBAC5C,OAAO,OAAO,CAAC;YACjB;QACA,mFAAmF;QACrF;IACF,GAAG;QAAC;QAAkB;QAAS;KAAO;IAEtC,mBAAmB;IACnB,0EAA0E;IAC1E,IAAI,SAAS;QACX,qBACE,qKAAC;YAAI,OAAO;gBACV,QAAQ;gBACR,OAAO;gBACP,SAAS;gBACT,gBAAgB;gBAChB,YAAY;gBACZ,iBAAiB,SAAS,YAAY;gBACtC,OAAO,SAAS,YAAY;gBAC5B,YAAY;YACd;sBACE,cAAA,qKAAC;gBAAI,OAAO;oBAAE,WAAW;gBAAS;0BAChC,cAAA,qKAAC;oBAAE,OAAO;wBAAE,YAAY;wBAAO,UAAU;oBAAO;8BAAG;;;;;;;;;;;;;;;;IAI3D;IAEA,uBAAuB;IACvB,8EAA8E;IAC9E,IAAI,CAAC,kBAAkB;QACrB,OAAO;IACT;IAEA,qBACE,qKAAC;QAAI,WAAW,CAAC,eAAe,EAAE,YAAY,eAAe,IAAI;;0BAC/D,qKAAC;gBAAK,WAAW,CAAC,cAAc,EAAE,iBAAiB,eAAe,GAAG,gBAAgB,CAAC;0BACnF;;;;;;0BAEH,qKAAC,yLAAY;;;;;;;;;;;AAGnB"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/services/wishlistApi.ts"],"sourcesContent":["const API_BASE = 'http://localhost:5000/api';\r\n\r\nexport interface WishlistItem {\r\n    _id: string;\r\n    product: {\r\n        _id: string;\r\n        name: string;\r\n        price: number;\r\n        image?: string;\r\n        stock: number;\r\n        isAvailable: boolean;\r\n        category?: string;\r\n    };\r\n    vendor: {\r\n        _id: string;\r\n        name: string;\r\n    };\r\n    added_at: string;\r\n}\r\n\r\n/**\r\n * Get JWT token from localStorage\r\n */\r\nconst getAuthToken = (): string | null => {\r\n    if (typeof window === 'undefined') return null;\r\n    return localStorage.getItem('auth_token');\r\n};\r\n\r\n/**\r\n * Create auth headers with JWT token\r\n */\r\nconst authHeaders = (): HeadersInit => {\r\n    const token = getAuthToken();\r\n    const headers: HeadersInit = {\r\n        'Content-Type': 'application/json',\r\n    };\r\n    if (token) {\r\n        headers['Authorization'] = `Bearer ${token}`;\r\n    }\r\n    return headers;\r\n};\r\n\r\n/**\r\n * Add a product to the wishlist\r\n * @param productId - The ID of the product to add\r\n */\r\nexport const addToWishlist = async (productId: string): Promise<void> => {\r\n    const response = await fetch(`${API_BASE}/customers/wishlist`, {\r\n        method: 'POST',\r\n        headers: authHeaders(),\r\n        body: JSON.stringify({ productId }),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Failed to add to wishlist');\r\n    }\r\n};\r\n\r\n/**\r\n * Remove a product from the wishlist\r\n * @param productId - The ID of the product to remove\r\n */\r\nexport const removeFromWishlist = async (productId: string): Promise<void> => {\r\n    const response = await fetch(`${API_BASE}/customers/wishlist/${productId}`, {\r\n        method: 'DELETE',\r\n        headers: authHeaders(),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Failed to remove from wishlist');\r\n    }\r\n};\r\n\r\n/**\r\n * Fetch the customer's wishlist with populated product and vendor data\r\n * @returns Array of wishlist items\r\n */\r\nexport const fetchWishlist = async (): Promise<WishlistItem[]> => {\r\n    const response = await fetch(`${API_BASE}/customers/wishlist`, {\r\n        method: 'GET',\r\n        headers: authHeaders(),\r\n    });\r\n\r\n    if (!response.ok) {\r\n        const error = await response.json();\r\n        throw new Error(error.message || 'Failed to fetch wishlist');\r\n    }\r\n\r\n    return response.json();\r\n};\r\n\r\n/**\r\n * Check if a product is in the wishlist\r\n * @param productId - The ID of the product to check\r\n * @param wishlist - The current wishlist array\r\n * @returns true if product is in wishlist\r\n */\r\nexport const isInWishlist = (productId: string, wishlist: WishlistItem[]): boolean => {\r\n    return wishlist.some(item => item.product._id === productId);\r\n};\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA,MAAM,WAAW;AAoBjB;;CAEC,GACD,MAAM,eAAe;IACjB,wCAAmC,OAAO;;;AAE9C;AAEA;;CAEC,GACD,MAAM,cAAc;IAChB,MAAM,QAAQ;IACd,MAAM,UAAuB;QACzB,gBAAgB;IACpB;IACA,IAAI,OAAO;QACP,OAAO,CAAC,gBAAgB,GAAG,CAAC,OAAO,EAAE,OAAO;IAChD;IACA,OAAO;AACX;AAMO,MAAM,gBAAgB,OAAO;IAChC,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,mBAAmB,CAAC,EAAE;QAC3D,QAAQ;QACR,SAAS;QACT,MAAM,KAAK,SAAS,CAAC;YAAE;QAAU;IACrC;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,QAAQ,MAAM,SAAS,IAAI;QACjC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAMO,MAAM,qBAAqB,OAAO;IACrC,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,oBAAoB,EAAE,WAAW,EAAE;QACxE,QAAQ;QACR,SAAS;IACb;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,QAAQ,MAAM,SAAS,IAAI;QACjC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;AACJ;AAMO,MAAM,gBAAgB;IACzB,MAAM,WAAW,MAAM,MAAM,GAAG,SAAS,mBAAmB,CAAC,EAAE;QAC3D,QAAQ;QACR,SAAS;IACb;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QACd,MAAM,QAAQ,MAAM,SAAS,IAAI;QACjC,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACrC;IAEA,OAAO,SAAS,IAAI;AACxB;AAQO,MAAM,eAAe,CAAC,WAAmB;IAC5C,OAAO,SAAS,IAAI,CAAC,CAAA,OAAQ,KAAK,OAAO,CAAC,GAAG,KAAK;AACtD"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/vigne/Desktop/Community-Cart/frontend/src/pages/customer/browse-products.tsx"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\r\nimport { useRouter } from 'next/router';\r\nimport CustomerLayout from '../../components/customer/CustomerLayout';\r\nimport { useCustomerStore } from '../../context/CustomerStore';\r\nimport { useToast } from '../../components/ui/ToastProvider';\r\nimport { addToWishlist, removeFromWishlist, fetchWishlist, WishlistItem } from '../../services/wishlistApi';\r\n\r\ninterface Product {\r\n    _id: string;\r\n    name: string;\r\n    price: number;\r\n    image?: string;\r\n    vendor?: { name?: string };\r\n    isAvailable?: boolean;\r\n    stock?: number;\r\n}\r\n\r\nconst API_BASE = 'http://localhost:5000/api';\r\n\r\nconst CATEGORIES = [\r\n    { name: 'Grocery', icon: '/customer/assets/icons/grocery.svg', color: '#EDE7F6', iconColor: '#7E57C2' },\r\n    { name: 'Vegies', icon: '/customer/assets/icons/vegies.svg', color: '#E8F5E9', iconColor: '#4CAF50' },\r\n    { name: 'Fruits', icon: '/customer/assets/icons/fruits.svg', color: '#FFEBEE', iconColor: '#EF5350' },\r\n    { name: 'Bakery', icon: '/customer/assets/icons/bakery.svg', color: '#FCE4EC', iconColor: '#EC407A' },\r\n    { name: 'Pharmacy', icon: '/customer/assets/icons/pharmacy.svg', color: '#E0F7FA', iconColor: '#00ACC1' },\r\n    { name: 'Laundry', icon: '/customer/assets/icons/laundry.svg', color: '#EDE7F6', iconColor: '#5E35B1' },\r\n];\r\n\r\nexport default function BrowseProducts() {\r\n    const router = useRouter();\r\n    const { addToCart, updateQuantity, ensureCustomerId, cart } = useCustomerStore();\r\n    const { pushToast } = useToast();\r\n    const [products, setProducts] = useState<Product[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [wishlist, setWishlist] = useState<WishlistItem[]>([]);\r\n    const [wishlistLoading, setWishlistLoading] = useState(false);\r\n\r\n    // Sync search term from URL query\r\n    useEffect(() => {\r\n        if (router.isReady && router.query.q) {\r\n            setSearchTerm(router.query.q as string);\r\n        }\r\n    }, [router.isReady, router.query.q]);\r\n\r\n    // Fetch wishlist from backend\r\n    useEffect(() => {\r\n        const loadWishlist = async () => {\r\n            try {\r\n                const data = await fetchWishlist();\r\n                setWishlist(data);\r\n            } catch (err: any) {\r\n                // Silent fail - user might not be logged in yet\r\n                console.error('Failed to load wishlist:', err);\r\n            }\r\n        };\r\n        loadWishlist();\r\n    }, []);\r\n\r\n    const toggleWishlist = async (productId: string) => {\r\n        const isCurrentlyInWishlist = wishlist.some(item => item.product._id === productId);\r\n\r\n        // Optimistic UI update\r\n        if (isCurrentlyInWishlist) {\r\n            setWishlist(prev => prev.filter(item => item.product._id !== productId));\r\n        } else {\r\n            // We'll refetch after adding to get the complete data\r\n            setWishlistLoading(true);\r\n        }\r\n\r\n        try {\r\n            if (isCurrentlyInWishlist) {\r\n                await removeFromWishlist(productId);\r\n                pushToast({ type: 'success', message: 'Removed from favorites' });\r\n            } else {\r\n                await addToWishlist(productId);\r\n                // Refetch wishlist to get the complete item data\r\n                const updatedWishlist = await fetchWishlist();\r\n                setWishlist(updatedWishlist);\r\n                pushToast({ type: 'success', message: 'Added to favorites' });\r\n            }\r\n        } catch (err: any) {\r\n            // Revert optimistic update on error\r\n            if (isCurrentlyInWishlist) {\r\n                const updatedWishlist = await fetchWishlist();\r\n                setWishlist(updatedWishlist);\r\n            } else {\r\n                setWishlist(prev => prev.filter(item => item.product._id !== productId));\r\n            }\r\n            pushToast({ type: 'error', message: err.message || 'Failed to update wishlist' });\r\n        } finally {\r\n            setWishlistLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        const load = async () => {\r\n            await ensureCustomerId();\r\n            try {\r\n                const res = await fetch(`${API_BASE}/products`);\r\n                if (!res.ok) throw new Error('Failed to fetch products');\r\n                const data = await res.json();\r\n                const available = data.filter((p: Product) => p.isAvailable !== false && (p.stock ?? 0) > 0);\r\n                setProducts(available);\r\n            } catch (err: any) {\r\n                setError(err.message || 'Failed to load products');\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        load();\r\n    }, [ensureCustomerId]);\r\n\r\n    const cartMap = useMemo(() => {\r\n        const map = new Map<string, number>();\r\n        cart.forEach((item) => map.set(item.product._id, item.quantity));\r\n        return map;\r\n    }, [cart]);\r\n\r\n    const handleAdd = (product: Product) => {\r\n        const stock = product.stock ?? 0;\r\n        const currentQty = cartMap.get(product._id) || 0;\r\n        if (stock <= 0) return;\r\n        if (currentQty >= stock) {\r\n            pushToast({ type: 'warning', message: `Only ${stock} left for ${product.name}` });\r\n            return;\r\n        }\r\n\r\n        addToCart({\r\n            _id: product._id,\r\n            name: product.name,\r\n            price: product.price,\r\n            image: product.image,\r\n            vendorName: product.vendor?.name,\r\n            stock: product.stock,\r\n        }, stock);\r\n    };\r\n\r\n    const updateItemQty = (product: Product, delta: number) => {\r\n        const currentQty = cartMap.get(product._id) || 0;\r\n        const newQty = currentQty + delta;\r\n        if (newQty <= 0) {\r\n            updateQuantity(product._id, 0);\r\n        } else {\r\n            updateQuantity(product._id, newQty);\r\n        }\r\n    };\r\n\r\n    const filteredProducts = products.filter(p => p.name.toLowerCase().includes(searchTerm.toLowerCase()));\r\n\r\n    return (\r\n        <CustomerLayout>\r\n            <div className=\"browse-page\">\r\n                {/* Search Bar */}\r\n                <div className=\"search-container\">\r\n                    <div className=\"search-bar\">\r\n                        <img src=\"/customer/assets/icons/search.svg\" alt=\"Search\" className=\"search-icon\" style={{ width: '20px', height: '20px' }} />\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"Search keywords..\"\r\n                            value={searchTerm}\r\n                            onChange={(e) => setSearchTerm(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Categories */}\r\n                <div className=\"categories-list\">\r\n                    {CATEGORIES.map((cat) => (\r\n                        <div key={cat.name} className=\"category-item\" onClick={() => router.push(`/customer/category?type=${cat.name}`)}>\r\n                            <div className=\"cat-icon-circle\" style={{ backgroundColor: cat.color }}>\r\n                                <img src={cat.icon} alt={cat.name} style={{ width: '24px', height: '24px' }} />\r\n                            </div>\r\n                            <span className=\"cat-name\">{cat.name}</span>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n\r\n                <h2 className=\"section-title\">Featured Products <img src=\"/customer/assets/icons/forward.svg\" alt=\"View all\" style={{ fontSize: '20px', float: 'right', width: '20px', height: '20px' }} /></h2>\r\n\r\n                {loading && <div className=\"page-state\">Loading products…</div>}\r\n                {error && !loading && <div className=\"page-state error\">{error}</div>}\r\n\r\n                {!loading && !error && (\r\n                    <div className=\"products-grid\">\r\n                        {filteredProducts.map((product, index) => {\r\n                            const qtyInCart = cartMap.get(product._id) || 0;\r\n                            const isEven = index % 2 === 0;\r\n\r\n                            const discount = isEven ? '-16%' : null;\r\n                            const isNew = !isEven;\r\n\r\n                            return (\r\n                                <div key={product._id} className=\"product-card\">\r\n                                    <div className=\"product-card-header\">\r\n                                        {discount && <span className=\"product-badge discount\">{discount}</span>}\r\n                                        {isNew && <span className=\"product-badge new\">NEW</span>}\r\n                                        <button className=\"product-wishlist-btn\" onClick={(e) => { e.stopPropagation(); toggleWishlist(product._id); }}>\r\n                                            <img\r\n                                                src={wishlist.some(item => item.product._id === product._id) ? \"/customer/assets/icons/favorite-filled.svg\" : \"/customer/assets/icons/favorite.svg\"}\r\n                                                alt=\"Wishlist\"\r\n                                                style={{ width: '24px', height: '24px' }}\r\n                                            />\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    <div className=\"product-image-wrapper\" onClick={() => router.push(`/customer/product/${product._id}`)}>\r\n                                        <img\r\n                                            src={product.image || '/customer/assets/icons/missing.svg'}\r\n                                            alt={product.name}\r\n                                            className={product.image ? 'product-image' : 'product-image-missing'}\r\n                                        />\r\n                                    </div>\r\n\r\n                                    <div className=\"product-card-body\" onClick={() => router.push(`/customer/product/${product._id}`)}>\r\n                                        <h4 className=\"product-name\">{product.name}</h4>\r\n                                        <p className=\"product-qty-label\">Quantity</p>\r\n                                        <div className=\"product-price-wrapper\">\r\n                                            <span className=\"product-final-price\">₹{product.price.toFixed(2)}</span>\r\n                                        </div>\r\n                                    </div>\r\n\r\n                                    <div className=\"product-card-footer\">\r\n                                        {qtyInCart > 0 ? (\r\n                                            <div className=\"product-qty-controls\">\r\n                                                <button className=\"product-qty-btn\" onClick={() => updateItemQty(product, -1)}>\r\n                                                    −\r\n                                                </button>\r\n                                                <span className=\"product-qty-value\">{qtyInCart}</span>\r\n                                                <button className=\"product-qty-btn\" onClick={() => updateItemQty(product, 1)}>\r\n                                                    +\r\n                                                </button>\r\n                                            </div>\r\n                                        ) : (\r\n                                            <button\r\n                                                className=\"product-add-btn\"\r\n                                                onClick={() => handleAdd(product)}\r\n                                                disabled={(product.stock ?? 0) <= 0}\r\n                                            >\r\n                                                <img src=\"/customer/assets/icons/bag.svg\" alt=\"Cart\" className=\"product-cart-icon\" />\r\n                                                Add to cart\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            );\r\n                        })}\r\n                        {filteredProducts.length === 0 && <div className=\"page-state\">No products found.</div>}\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </CustomerLayout>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}